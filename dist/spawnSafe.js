"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var cross_spawn_1 = require("cross-spawn");
var defaultOptions = {
    logStdErrOnError: true,
    throwOnError: true,
};
function spawnSafeSync(command, args, options) {
    var mergedOptions = Object.assign({}, defaultOptions, options);
    var result = cross_spawn_1.sync(command, args, options);
    if (result.error || result.status !== 0) {
        if (mergedOptions.logStdErrOnError) {
            console.error(result.stderr.toString());
        }
        if (mergedOptions.throwOnError) {
            throw result;
        }
    }
    return result;
}
exports.default = spawnSafeSync;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Bhd25TYWZlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3NwYXduU2FmZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDJDQUErQztBQVEvQyxJQUFNLGNBQWMsR0FBcUI7SUFDdkMsZ0JBQWdCLEVBQUUsSUFBSTtJQUN0QixZQUFZLEVBQUUsSUFBSTtDQUNuQixDQUFBO0FBRUQsdUJBQ0UsT0FBZSxFQUNmLElBQWUsRUFDZixPQUEwQjtJQUUxQixJQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxjQUFjLEVBQUUsT0FBTyxDQUFDLENBQUE7SUFDaEUsSUFBTSxNQUFNLEdBQUcsa0JBQVMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFBO0lBQ2hELEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLEVBQUUsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7WUFDbkMsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUE7UUFDekMsQ0FBQztRQUNELEVBQUUsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQy9CLE1BQU0sTUFBTSxDQUFBO1FBQ2QsQ0FBQztJQUNILENBQUM7SUFDRCxNQUFNLENBQUMsTUFBTSxDQUFBO0FBQ2YsQ0FBQztBQWhCRCxnQ0FnQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzeW5jIGFzIHNwYXduU3luYyB9IGZyb20gXCJjcm9zcy1zcGF3blwiXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNwYXduU2FmZU9wdGlvbnMge1xyXG4gIHRocm93T25FcnJvcj86IGJvb2xlYW5cclxuICBsb2dTdGRFcnJPbkVycm9yPzogYm9vbGVhblxyXG4gIGN3ZD86IHN0cmluZ1xyXG59XHJcblxyXG5jb25zdCBkZWZhdWx0T3B0aW9uczogU3Bhd25TYWZlT3B0aW9ucyA9IHtcclxuICBsb2dTdGRFcnJPbkVycm9yOiB0cnVlLFxyXG4gIHRocm93T25FcnJvcjogdHJ1ZSxcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3Bhd25TYWZlU3luYyhcclxuICBjb21tYW5kOiBzdHJpbmcsXHJcbiAgYXJncz86IHN0cmluZ1tdLFxyXG4gIG9wdGlvbnM/OiBTcGF3blNhZmVPcHRpb25zLFxyXG4pIHtcclxuICBjb25zdCBtZXJnZWRPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpXHJcbiAgY29uc3QgcmVzdWx0ID0gc3Bhd25TeW5jKGNvbW1hbmQsIGFyZ3MsIG9wdGlvbnMpXHJcbiAgaWYgKHJlc3VsdC5lcnJvciB8fCByZXN1bHQuc3RhdHVzICE9PSAwKSB7XHJcbiAgICBpZiAobWVyZ2VkT3B0aW9ucy5sb2dTdGRFcnJPbkVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IocmVzdWx0LnN0ZGVyci50b1N0cmluZygpKVxyXG4gICAgfVxyXG4gICAgaWYgKG1lcmdlZE9wdGlvbnMudGhyb3dPbkVycm9yKSB7XHJcbiAgICAgIHRocm93IHJlc3VsdFxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gcmVzdWx0XHJcbn1cclxuIl19